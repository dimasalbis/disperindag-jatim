let ids=priv.ids;function getRecords(){return priv.permissions.slice(0).map(e=>Object.fromEntries([["table",e.table],["index",e.index],["allowed",e.allowed],...ids.map(t=>[t,e.permission&priv[t]])]))}function getFormatter(e){return function(t,i){let a=t.getRow(),l=a.getIndex(),s=e+"_"+l,r=priv[e],n=a.getData().allowed,o=t.getValue()==r;return a.checked=o,'<div class="form-check"><input type="checkbox" class="form-check-input ew-priv ew-multi-select" name="'+s+'" id="'+s+'" value="'+r+'" data-index="'+l+'"'+(o?" checked":"")+((n&r)!=r?" disabled":"")+"></div>"}}function displayTableName(e,t){let i=e.getRow();return i.getData().table+'<input type="hidden" name="table_'+i.getIndex()+'" value="1">'}function getTitleHtml(e,t){return'<div class="form-check"><input type="checkbox" class="form-check-input ew-priv" name="'+e+'" id="'+e+'" data-ew-action="select-all"><label class="form-check-label" for="'+e+'">'+ew.language.phrase("Permission"+(t||e))+"</label></div>"}function getColumns(){return[{title:'<span class="fw-normal">'+ew.language.phrase("Tables")+"</span>",field:"table",formatter:displayTableName,sorter:"string",headerSortTristate:headerSortTristate,resizable:!1},...ids.map(e=>({title:getTitleHtml(e),field:e,formatter:getFormatter(e),headerSort:!1,resizable:!1}))]}(e=>{let t,i=ew.deepAssign({index:"index",data:getRecords(),layout:"fitDataFill",initialSort:[{column:"table",dir:"asc"}],columnHeaderSortMulti:!1,columns:getColumns()},tableOptions),a=new Tabulator(".ew-card.ew-user-priv .ew-card-body",i);a.on("dataProcessed",()=>{e("input[type=checkbox]").on("click",(function(){let e=parseInt(this.dataset.index,10),t=parseInt(this.value,10);isNaN(e)||isNaN(t)||(this.checked?priv.permissions[e].permission|=t:priv.permissions[e].permission^=priv.permissions[e].permission^t)})),ew.initMultiSelectCheckboxes(),ew.fixLayoutHeight()}),e("#table-name").on("keydown keypress cut paste",()=>{t?.cancel(),t=e.later(200,null,()=>a.setFilter("table","like",e("#table-name").val()))})})(jQuery);
//# sourceMappingURL=userpriv.min.js.map